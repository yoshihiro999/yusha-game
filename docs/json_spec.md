# JSON データ仕様まとめ

このドキュメントでは `data/` ディレクトリに含まれる主要 JSON ファイルの構造と用途を整理します。

---

## game_config.json

### 概要
ゲーム全体の基本設定をまとめたファイル。マップのグリッドサイズやステージ数など、ゲーム進行に関わる数値を定義しています。

### データ構造（全体構造とキー一覧）
- ルート: オブジェクト
- 含まれるキー: `gridWidth`, `gridHeight`, `stageCount`, `wavesPerStage`

### フィールド仕様
| フィールド名     | データ型 | 説明                                 | デフォルト値 | 制約・バリデーション | 備考 |
|------------------|---------|------------------------------------|-------------|---------------------|------|
| gridWidth        | number  | マップ横方向のマス数                 | 40          | 正の整数            |     |
| gridHeight       | number  | マップ縦方向のマス数                 | 40          | 正の整数            |     |
| stageCount       | number  | 全ステージ数                         | 5           | 正の整数            |     |
| wavesPerStage    | number  | 各ステージにおけるウェーブ数         | 8           | 正の整数            |     |

### サンプル
```json
{
  "gridWidth": 40,
  "gridHeight": 40,
  "stageCount": 5,
  "wavesPerStage": 8
}
```

---

## hero_parties.json

### 概要
ステージごとに登場する勇者パーティ編成を定義したファイル。各パーティは複数のメンバー情報とコンセプト、出発時セリフなどを持ちます。

### データ構造（全体構造とキー一覧）
- ルート: 配列
- 各要素: パーティを表すオブジェクト
  - `stage`: 出現ステージ番号
  - `team`: チームID
  - `members`: メンバー配列（各メンバーは `name`, `role`, `hp`, `attack`, `mp`, `defense` を保持）
  - `concept`: パーティの特徴を表す文言
  - `departure_quote`: 出発時のセリフ
  - `battle_chat_file`: 戦闘中セリフを収めた別JSONへのパス

### フィールド仕様
| フィールド名      | データ型       | 説明                               | デフォルト値 | 制約・バリデーション     | 備考 |
|-------------------|--------------|----------------------------------|-------------|-----------------------|------|
| stage             | number       | パーティが登場するステージ番号       | -           | 正の整数              |     |
| team              | string       | チームID（ステージ内で一意）        | -           | 必須                  |     |
| members           | array        | メンバー情報の配列                  | -           | 空配列不可             |     |
| concept           | string       | パーティのコンセプト説明             | -           | 任意文字列            |     |
| departure_quote   | string       | 出発時の掛け声                       | -           | 任意文字列            |     |
| battle_chat_file  | string       | セリフファイルへのパス               | -           | 有効なファイルパス      |     |

**members 要素のフィールド**
| フィールド名 | データ型 | 説明       | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|-----------|-------------|---------------------|------|
| name         | string  | メンバー名 | -           | 必須                |     |
| role         | string  | 職業       | -           | 必須                |     |
| hp           | number  | 体力値     | -           | 正の整数            |     |
| attack       | number  | 攻撃力     | -           | 正の整数            |     |
| mp           | number  | 魔力値     | -           | 正の整数            |     |
| defense      | number  | 防御力     | -           | 正の整数            |     |

### サンプル
```json
{
  "stage": 1,
  "team": "1-1",
  "members": [
    {"name": "セシルヤ", "role": "勇者", "hp": 140, "attack": 39, "mp": 54, "defense": 24},
    {"name": "セシルリス", "role": "忍者", "hp": 157, "attack": 34, "mp": 43, "defense": 9}
  ],
  "concept": "正統派王道チーム",
  "departure_quote": "王道をゆくぞ、魔王討伐へ！",
  "battle_chat_file": "battle_chat/1-1.json"
}
```

---

## heroes.json

### 概要
勇者パーティの職業種別を定義したファイル。各職業の基本ステータスを示します。

### データ構造（全体構造とキー一覧）
- ルート: 配列
- 各要素: オブジェクト
  - `id`: 職業ID
  - `name`: 表示名
  - `role`: 戦闘上の役割
  - `hp`, `mp`, `attack`: 基本パラメータ

### フィールド仕様
| フィールド名 | データ型 | 説明                     | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|------------------------|-------------|---------------------|------|
| id           | string  | 職業を識別するID        | -           | 必須               |     |
| name         | string  | 職業名                  | -           | 必須               |     |
| role         | string  | 戦闘ロール               | -           | 任意文字列         |     |
| hp           | number  | 基本HP                  | -           | 正の整数           |     |
| mp           | number  | 基本MP                  | -           | 正の整数           |     |
| attack       | number  | 基本攻撃力               | -           | 正の整数           |     |

### サンプル
```json
[
  {"id": "hero", "name": "勇者", "role": "hero", "hp": 100, "mp": 20, "attack": 15},
  {"id": "warrior", "name": "戦士", "role": "tank", "hp": 120, "mp": 10, "attack": 10}
]
```

---

## map.json

### 概要
マップ全体の基本サイズとデフォルトの地形資源量を設定するファイル。

### データ構造（全体構造とキー一覧）
- ルート: オブジェクト
- 含まれるキー: `width`, `height`, `defaultTile`

### フィールド仕様
| フィールド名 | データ型 | 説明                           | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|------------------------------|-------------|---------------------|------|
| width        | number  | マップの幅（マス数）           | 40          | 正の整数            |     |
| height       | number  | マップの高さ（マス数）         | 40          | 正の整数            |     |
| defaultTile  | object  | すべてのタイル初期値            | {"nutrients":5,"mana":2} | `nutrients`,`mana`は数値 |     |

### サンプル
```json
{
  "width": 40,
  "height": 40,
  "defaultTile": {"nutrients": 5, "mana": 2}
}
```

---

## layered_map.json

### 概要
複数レイヤーから成るマップ構造のサンプルデータ。背景タイル、地形タイル、オブジェクト配置、UI表示などを階層化して記述しています。

### データ構造（全体構造とキー一覧）
- ルート: オブジェクト
- キー
  - `size`: `[幅, 高さ]` の配列
  - `layers`: レイヤー配列（各要素は `name` と `tiles` または `objects` を持つ）
  - `ui`: UI要素配列

### フィールド仕様
| フィールド名 | データ型 | 説明 | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|------|-------------|---------------------|------|
| size         | array   | マップサイズ `[x, y]`         | - | 要素数2の数値配列 |     |
| layers       | array   | 各レイヤーの定義配列           | - | - | `name`、`tiles`/`objects` を含む |
| ui           | array   | 画面上に重ねるUI情報           | - | - |                   |

**layers の各要素の主なフィールド**
- `name`: レイヤー名
- `tiles`: タイル配置情報の配列（`type` と `area`/`line`/`position` など）
- `objects`: オブジェクト配置情報の配列（`type`, `position`, `size` など）

### サンプル
```json
{
  "size": [40, 20],
  "layers": [
    {
      "name": "background",
      "tiles": [
        {"type": "grass", "area": [[0,0], [39,19]]},
        {"type": "building", "position": [18,0], "size": [4,4]}
      ]
    }
  ],
  "ui": [
    {"type": "label", "content": "STAGE CLEAR", "position": [20,1]}
  ]
}
```

---

## monsters.json

### 概要
モンスター種別ごとの進化情報をまとめたファイル。色や進化先、成長に必要なターン数などを定義しています。

### データ構造（全体構造とキー一覧）
- ルート: 配列
- 各要素: オブジェクト
  - `id`: モンスターID
  - `name`: 表示名
  - `color`: 通常時の表示色
  - `evolvedColor`: 進化後の表示色
  - `evolution`: 進化後名称
  - `growthTurns`: 進化までに必要なターン
  - `growthCost`: 進化に必要なコスト

### フィールド仕様
| フィールド名 | データ型 | 説明                       | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|--------------------------|-------------|---------------------|------|
| id           | string  | モンスター識別ID         | -           | 必須                |     |
| name         | string  | モンスター名             | -           | 必須                |     |
| color        | string  | 表示色（16進カラーコード）| -           | `#RRGGBB` 形式       |     |
| evolvedColor | string  | 進化後の表示色           | -           | `#RRGGBB` 形式       |     |
| evolution    | string  | 進化先名称               | -           | 任意文字列          |     |
| growthTurns  | number  | 進化に必要なターン数       | -           | 正の整数            |     |
| growthCost   | number  | 進化に必要なコスト         | -           | 正の整数            |     |

### サンプル
```json
{
  "id": "slime",
  "name": "スライム",
  "color": "#00cc88",
  "evolvedColor": "#004488",
  "evolution": "スライムロード",
  "growthTurns": 3,
  "growthCost": 5
}
```

---

## monsters_detailed.json

### 概要
モンスター個体の詳細パラメータ集。種族やランク(tier)に加え、HPと攻撃力を数値で持ちます。

### データ構造（全体構造とキー一覧）
- ルート: 配列
- 各要素: オブジェクト
  - `name`: モンスター名
  - `species`: 属する種族
  - `tier`: ランク区分（下位/中位/上位 等）
  - `hp`: 体力
  - `attack`: 攻撃力

### フィールド仕様
| フィールド名 | データ型 | 説明         | デフォルト値 | 制約・バリデーション | 備考 |
|--------------|---------|------------|-------------|---------------------|------|
| name         | string  | モンスター名 | -           | 必須                |     |
| species      | string  | 種族名       | -           | 任意文字列          |     |
| tier         | string  | ランク区分   | -           | 任意文字列          |     |
| hp           | number  | HP値        | -           | 正の整数            |     |
| attack       | number  | 攻撃力      | -           | 正の整数            |     |

### サンプル
```json
[
  {"name": "スライム", "species": "スライム族", "tier": "下位", "hp": 42, "attack": 9},
  {"name": "バブルスライム", "species": "スライム族", "tier": "下位", "hp": 32, "attack": 11}
]
```

---
