# 魔物と勇者のAI設計

このドキュメントでは、ゲーム内で登場する味方キャラクター（魔物）と敵キャラクター（勇者）のAI概要をまとめます。各種族がどのように行動し、どんな条件で変化するのかを整理しています。

## 魔物側AI

### ニジリゴケ類
- **基本動作**: 真っすぐ進み、壁にぶつかるとランダムに曲がる。
- **養分関連**: 養分を持っていなければ拾い、持っていれば置く。吸収時に体力を回復。
- **攻撃**: 進行方向のみ攻撃。
- **変態**: 生命力低下でツボミ化し、さらに養分を吸うとハナに成長。ハナは"もよもよ"を飛ばしムシ類を優先攻撃。

### ガジガジムシ類
- **基本動作**: 曲がれる場所では必ず曲がり、左右可能ならランダム選択。行き止まりでUターン。
- **捕食**: ニジリゴケや卵、ドラゴンのフンを食べる。空腹時は幼虫をも捕食。
- **勇者との戦闘**: 勇者撃破で全回復し、養分・魔分を取り込む。
- **変態**: 養分と体力が十分でサナギ化し、一定時間後に成虫となる。

### トカゲおとこ類
- **基本動作**: 巣を作り、その周辺を探索。巣が無ければニジリゴケと同様の動き。
- **捕食**: ニジリゴケやムシ類を食べ、空腹時は餌の方向を優先。
- **勇者との戦闘**: 勇者感知で移動速度が上がり素早く攻撃。
- **繁殖**: 条件を満たすと巣に産卵。子は親と同量の養分を保持し、養分が無限増加する特性を持つ。

### デーもん類
- **基本動作**: 右手法で広範囲を巡回。移動範囲は制限可能。
- **発生条件**: 魔法陣をつつくと出現。魔法陣は特定条件の土を掘ると作成できる。
- **捕食**: エレメント、リリス、トカゲおとこなどを食べる。満腹で眠っても補助効果は継続。
- **特殊能力**: 存在するだけで全魔物の物理防御を上げる（1体3%カット、上限60%）。デーもん同士が近いと互いに攻撃してしまう。

### エレメント類
- **基本動作**: 魔分版ニジリゴケとして動き、進行方向にのみ攻撃。
- **魔分関連**: 土から魔分を吸い上げ別の土に吐き出す。吸収で体力回復。
- **繁殖**: 生命力が51以上で分裂し、マップ全体の魔分量を増やす。
- **勇者との相互作用**: 攻撃で勇者のMPを削り、隣接土へ魔分を蓄積。しかばねや魔法陣に隣接すると吸い込まれる。

### リリス類
- **基本動作**: 移動方向はランダムだが角では必ず曲がる。フェロモンがあればその周囲を徘徊。
- **捕食**: ムシ類とエレメント類を捕食。
- **攻撃**: 魔弾による遠距離攻撃が得意で、9マス先まで探知可能。
- **特殊能力**: 養分消費でフェロモン生成。勇者を数秒止め、魔物が通過すると回復。

### ドラゴン類
- **基本動作**: 横方向にのみ移動・攻撃。
- **攻撃**: かみつきと火炎の2種。条件に応じ火炎放射を行い、他の魔物を巻き込むことも。
- **捕食**: あらゆるものを食べるが回復量は少ない。勇者をかみつきで倒すと多く回復。
- **繁殖**: 卵を産むと親は死亡。卵から上位種が生まれる場合もある。
- **フン**: 時おり"ふん"を落とし、勇者が踏むと一時的に動きを止める。

### スケルトン類
- **発生条件**: 勇者のしかばねをツルハシでつつくと誕生。
- **能力**: しかばねが持つ魔分量に比例して強力。魔王のしもべは赤いしかばねから生まれる。
- **攻撃**: 魔力を帯びた剣で攻撃し、勇者の攻撃力UP効果の持続を短縮。攻撃は魔法扱い。
- **生命活動**: 食事をせず、生命力が尽きると再びしかばねに戻る。勇者の攻撃やツルハシで倒されると消滅。

## 勇者側AI

勇者たちはダンジョンを攻略し、魔王を捕らえることを目的とします。

### 基本行動
- 目的は魔王を簀巻きにして地上に連れ出すこと。
- 探索では新しく掘られた通路へは基本的に入らず、評価値の低いセルを選び進む。
- 目の前に魔物が現れると戦闘し、数が多いと攻撃魔法、体力が減ると回復魔法を使用。
- 魔法使用や死亡時には養分・魔分が周囲の土壌へ蓄積される。
- たいまつを設置し、その近くでは体力を回復。

### 勇者の職業とスキル
剣士系・戦士系・魔道士系が存在し、それぞれ以下のスキルを使用します（魔王を捕らえた勇者は使用不可）。
- **たいまつ**: 消費MP0。設置した場所でHP回復。モチベーション低下時に使用しやすい。
- **回復魔法（ヒール）**: HP40%以下の味方がいると使用。モチベーション上昇。
- **回転切り**: モチベーションが高く隣接する魔物が2体以上いる場合に発動。
- **攻撃力UP（ウォークライ）**: モチベーション低下時に使用し、味方全体の物理攻撃力を増加。
- **炎魔法（ボルケーノ）**: 周囲に魔物が多いと使用。広範囲を焼き払う。
- **風魔法（トルネード）**: 隣接する魔物が2体以上いると使用。渦を描きながら広がる。
- **HP吸収（HPゲット）**: 自身のHPが50%以下で隣接した魔物に対し使用。与ダメージ分回復。
- **MP吸収（MPゲット）**: パーティMPが70%以下で、魔分を2以上持つ魔物と隣接すると使用。モチベーション上昇。
